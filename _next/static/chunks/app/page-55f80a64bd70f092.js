(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3365:function(e,t,r){Promise.resolve().then(r.bind(r,418))},418:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var s=r(7437),a=r(2265);let n=["application/pdf"],l=["image/png","image/jpeg","image/jpg","image/webp"];function o(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}function i(e){return n.includes(e.type)}function c(e){return l.includes(e.type)}function d(e){let{onFilesAdded:t,currentFileCount:r=0}=e,o=(0,a.useRef)(null),i=(0,a.useRef)(0),[c,d]=(0,a.useState)(null),m=(0,a.useCallback)(e=>{if(!e||0===e.length)return;let s=Array.from(e),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t+e.length;if(r>20)return{valid:!1,error:"Cannot add more than ".concat(20," files per session. You currently have ").concat(t," file").concat(1!==t?"s":""," and are trying to add ").concat(e.length," more."),fileCount:r};for(let r of e){var s;let e=(s=t)>=20?{valid:!1,error:"Maximum ".concat(20," files per session"),fileCount:s}:r.size>52428800?{valid:!1,error:'File "'.concat(r.name,'" exceeds maximum size of 50MB')}:n.includes(r.type)||l.includes(r.type)?{valid:!0}:([...n,...l.map(e=>e.replace("image/","."))],{valid:!1,error:'File "'.concat(r.name,'" is not a valid format. Accepted: PDF, PNG, JPG, JPEG, WEBP')});if(!e.valid)return e;t++}return{valid:!0}}(s,r);if(!a.valid){d(a.error||"File validation failed");return}d(null),t(s.map((e,t)=>({file:e,id:"".concat(Date.now(),"-").concat(t,"-").concat(e.name),name:e.name,size:e.size,type:e.type,order:t})))},[t,r]),u=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),i.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&e.currentTarget.classList.add("border-blue-500","bg-blue-50")},[]),g=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),i.current--,0===i.current&&e.currentTarget.classList.remove("border-blue-500","bg-blue-50")},[]),p=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),f=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),i.current=0,e.currentTarget.classList.remove("border-blue-500","bg-blue-50"),m(e.dataTransfer.files)},[m]),h=(0,a.useCallback)(e=>{m(e.target.files),o.current&&(o.current.value="")},[m]),x=(0,a.useCallback)(e=>{if("Enter"===e.key||" "===e.key){var t;e.preventDefault(),null===(t=o.current)||void 0===t||t.click()}},[]);return(0,s.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,s.jsxs)("label",{htmlFor:"file-upload-input",onDragEnter:u,onDragOver:p,onDragLeave:g,onDrop:f,onKeyDown:x,className:"border-2 border-dashed border-gray-300 rounded-lg p-6 sm:p-12 text-center cursor-pointer transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 block",tabIndex:0,"aria-label":"File upload area",children:[(0,s.jsx)("input",{id:"file-upload-input",ref:o,type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.webp,application/pdf,image/png,image/jpeg,image/webp",onChange:h,className:"hidden","aria-label":"File input"}),(0,s.jsx)("p",{className:"text-base sm:text-lg mb-2",children:"Drag and drop files here, or click to select"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Supported formats: PDF, PNG, JPG, JPEG, WEBP (max 50MB per file, 20 files max)"})]}),c&&(0,s.jsxs)("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs sm:text-sm text-red-800 font-medium",children:c}),(0,s.jsx)("button",{onClick:()=>d(null),className:"mt-2 text-xs sm:text-sm text-red-600 hover:text-red-800 underline","aria-label":"Dismiss error",children:"Dismiss"})]})]})}function m(e){let{files:t,onDelete:r,onReorder:n}=e,[l,i]=(0,a.useState)(null),c=e=>{i(e)},d=(e,r)=>{if(e.preventDefault(),e.stopPropagation(),null===l||l===r)return;let s=[...t],a=s[l];s.splice(l,1),s.splice(r,0,a),s.forEach((e,t)=>{e.order=t}),n(s),i(r)},m=()=>{i(null)},u=e=>{r(e)},g=(e,t)=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),u(t))};return(0,s.jsxs)("div",{className:"mt-6 sm:mt-8",children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-3 sm:mb-4",children:"Uploaded Files"}),(0,s.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>c(t),onDragOver:e=>d(e,t),onDragEnd:m,className:"flex items-center justify-between p-3 sm:p-4 border rounded-lg bg-white ".concat(l===t?"opacity-50":""," ").concat(l===t?"cursor-grabbing":"cursor-grab"),role:"listitem","aria-label":"File ".concat(e.name,", ").concat(o(e.size)),children:[(0,s.jsxs)("div",{className:"flex items-center flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"mr-2 sm:mr-3 text-gray-400","aria-hidden":"true",children:"⋮⋮"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium truncate text-sm sm:text-base",children:e.name}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:[o(e.size)," • ",e.type]})]})]}),(0,s.jsx)("button",{onClick:()=>u(e.id),onKeyDown:t=>g(t,e.id),className:"ml-2 sm:ml-4 px-2 sm:px-3 py-1 text-xs sm:text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2","aria-label":"Delete ".concat(e.name),children:"Delete"})]},e.id))})]})}function u(e){let{canConvertPdfToImages:t,canConvertImagesToPdf:r,onConvert:n,onDownload:l,isProcessing:o,hasDownloadReady:i}=e,[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{i&&d(null)},[i]);let m=!o&&!i&&null!==c&&("pdf-to-images"===c&&t||"images-to-pdf"===c&&r);return(0,s.jsxs)("div",{className:"mt-6 sm:mt-8 p-4 sm:p-6 border rounded-lg bg-gray-50",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Conversion Options"}),(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center mb-2",children:[(0,s.jsx)("input",{type:"radio",name:"conversionType",value:"pdf-to-images",checked:"pdf-to-images"===c,onChange:e=>d(e.target.value),disabled:!t||o||i,className:"mr-2","aria-label":"Convert PDF to Images"}),(0,s.jsx)("span",{className:t?"":"text-gray-400",children:"PDF → Images"})]}),!t&&(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 ml-6",children:"No PDF files uploaded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center mb-2",children:[(0,s.jsx)("input",{type:"radio",name:"conversionType",value:"images-to-pdf",checked:"images-to-pdf"===c,onChange:e=>d(e.target.value),disabled:!r||o||i,className:"mr-2","aria-label":"Convert Images to PDF"}),(0,s.jsx)("span",{className:r?"":"text-gray-400",children:"Images → PDF"})]}),!r&&(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 ml-6",children:"No image files uploaded"})]}),i?(0,s.jsx)("button",{onClick:()=>{l()},"aria-label":"Download converted file",className:"w-full px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold transition-colors text-sm sm:text-base bg-green-600 text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Download"}):(0,s.jsx)("button",{onClick:()=>{c&&n(c)},disabled:!m,"aria-label":o?"Converting files":"Start conversion",className:"w-full px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold transition-colors text-sm sm:text-base ".concat(m?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:o?"Converting...":"Convert"})]})]})}function g(e){let{state:t}=e;if("idle"===t.status)return null;let r=t.progress.total>0?Math.round(t.progress.current/t.progress.total*100):0;return(0,s.jsxs)("div",{className:"mt-6 p-4 rounded-lg",children:["processing"===t.status&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center mb-3",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-blue-900",children:"Processing..."}),t.progress.message&&(0,s.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:t.progress.message})]})]}),t.progress.total>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-blue-600 mb-2",children:[(0,s.jsxs)("span",{children:[t.progress.current," of ",t.progress.total]}),(0,s.jsxs)("span",{children:[r,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(r,"%")}})})]})]}),"success"===t.status&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("p",{className:"font-semibold text-green-900",children:"Conversion Complete!"})]}),t.progress.message&&(0,s.jsx)("p",{className:"text-sm text-green-700 mt-1",children:t.progress.message})]}),"error"===t.status&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,s.jsx)("p",{className:"font-semibold text-red-900",children:"Conversion Failed"})]}),t.error&&(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:t.error})]})]})}class p extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){if(this.state.hasError){var e;return this.props.fallback?this.props.fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-red-900 mb-4",children:"Something went wrong"}),(0,s.jsx)("p",{className:"text-red-800 mb-4",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,s.jsx)("button",{onClick:this.handleReset,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Try again"})]})})}return this.props.children}constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}}let f=null;async function h(){return f||((f=await r.e(980).then(r.bind(r,971))).GlobalWorkerOptions.workerSrc="/pdf.worker.min.js"),f}let x=300/72;async function b(e,t){let r=await h(),s=await e.arrayBuffer();t&&t(0,1,"Loading PDF: ".concat(e.name,"..."));let a=r.getDocument({data:s}),n=await a.promise,l=n.numPages;t&&t(0,l,"Processing ".concat(l," page").concat(1!==l?"s":""," from ").concat(e.name,"..."));let o=[];for(let r=1;r<=l;r++){t&&t(r,l,"Converting page ".concat(r," of ").concat(l," from ").concat(e.name,"..."));let s=await n.getPage(r),a=s.getViewport({scale:x}),i=document.createElement("canvas");i.width=a.width,i.height=a.height;let c=i.getContext("2d");if(!c)throw Error("Failed to get canvas context");let d={canvasContext:c,viewport:a};await s.render(d).promise;let m=await new Promise((e,t)=>{i.toBlob(r=>{r?e(r):t(Error("Failed to convert canvas to blob"))},"image/png")});o.push(m)}return o}function v(e,t,r){let s=e.replace(/\.pdf$/i,""),a=r.toString().length,n=String(t).padStart(a,"0");return"".concat(s,"-page-").concat(n,".png")}var w=r(9315),j=r.n(w);async function y(e,t){let r=new(j());if(1===e.length){let s=e[0].name,a=t.get(s)||[];a.forEach((e,t)=>{let n=v(s,t+1,a.length);r.file(n,e)})}else e.forEach(e=>{let s=t.get(e.name)||[],a=e.name.replace(/\.pdf$/i,"");s.forEach((t,n)=>{let l=v(e.name,n+1,s.length);r.file("".concat(a,"/").concat(l),t)})});return r.generateAsync({type:"blob"})}var N=r(6391);async function P(e,t){let r=await N.PDFDocument.create(),s=e.length,a=null;for(let n=0;n<e.length;n++){let l;let o=e[n];t&&t(n+1,s,"Processing image ".concat(n+1," of ").concat(s,": ").concat(o.name,"..."));let i=await o.arrayBuffer();if("image/png"===o.type)l=await r.embedPng(i);else if("image/jpeg"===o.type||"image/jpg"===o.type)l=await r.embedJpg(i);else if("image/webp"===o.type){let e=await createImageBitmap(o),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let s=t.getContext("2d");if(s){s.drawImage(e,0,0);let a=await new Promise((e,r)=>{t.toBlob(t=>{t?e(t):r(Error("Failed to convert WebP"))},"image/png")}),n=await a.arrayBuffer();l=await r.embedPng(n)}else throw Error("Failed to get canvas context for WebP conversion")}else throw Error("Unsupported image type: ".concat(o.type));if(!a){let e=l.scale(1);a={width:e.width||595.28,height:e.height||841.89}}let c=r.addPage([a.width,a.height]),d=l.scale(1),m=c.getWidth(),u=c.getHeight(),g=d.width,p=d.height,f=Math.min(m/g,u/p),h=g*f,x=p*f,b=(m-h)/2,v=(u-x)/2;c.drawImage(l,{x:b,y:v,width:h,height:x})}return t&&t(s,s,"Generating PDF..."),new Blob([await r.save()],{type:"application/pdf"})}function D(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)({type:null,status:"idle",progress:{current:0,total:0,message:""},error:null}),l=async t=>{try{if(n({type:t,status:"processing",progress:{current:0,total:0,message:"Starting conversion..."},error:null,downloadBlob:void 0,downloadFileName:void 0}),"pdf-to-images"===t){let t=e.filter(e=>i(e.file)),r=new Map;for(let e=0;e<t.length;e++){let s=t[e],a=e+1,l=t.length;n(t=>({...t,progress:{current:e,total:l,message:"Processing file ".concat(a," of ").concat(l,": ").concat(s.name,"...")}}));let o=await b(s.file,(t,r,s)=>{let a=e+t/r;n(e=>({...e,progress:{current:Math.floor(a*l),total:l,message:s}}))});r.set(s.name,o)}n(e=>({...e,progress:{current:t.length,total:t.length,message:"Creating ZIP archive..."}}));let s=await y(t.map(e=>e.file),r);n({type:"pdf-to-images",status:"success",progress:{current:t.length,total:t.length,message:"Successfully converted ".concat(t.length," PDF").concat(1!==t.length?"s":""," to images!")},error:null,downloadBlob:s,downloadFileName:"converted-images.zip"})}else{let t=e.filter(e=>c(e.file));n(e=>({...e,progress:{current:0,total:t.length,message:"Converting ".concat(t.length," image").concat(1!==t.length?"s":""," to PDF...")}}));let r=await P(t.map(e=>e.file),(e,t,r)=>{n(s=>({...s,progress:{current:e,total:t,message:r}}))});n({type:"images-to-pdf",status:"success",progress:{current:t.length,total:t.length,message:"Successfully converted ".concat(t.length," image").concat(1!==t.length?"s":""," to PDF!")},error:null,downloadBlob:r,downloadFileName:"converted.pdf"})}}catch(r){let e=r instanceof Error?r.message:"An unexpected error occurred during conversion",t=e;e.includes("Failed to get canvas context")?t="Unable to process the file. Please try a different file or refresh the page.":e.includes("Failed to convert")?t="Failed to convert the file. The file may be corrupted or in an unsupported format.":e.includes("Unsupported image type")?t="This image format is not supported. Please use PNG, JPG, JPEG, or WEBP.":e.includes("Failed to load")?t="Unable to load the file. Please check that the file is not corrupted.":e.includes("Invalid PDF")||e.includes("PDF structure")?t="This PDF file appears to be corrupted or invalid. Please try a different PDF file.":(e.includes("password")||e.includes("encrypted"))&&(t="This PDF file is password-protected or encrypted. Please remove the password and try again."),n({type:null,status:"error",progress:{current:0,total:0,message:""},error:t,downloadBlob:void 0,downloadFileName:void 0})}},o=e.filter(e=>i(e.file)),f=e.filter(e=>c(e.file)),h=o.length>0,x=f.length>0,v="success"===r.status&&void 0!==r.downloadBlob;return(0,s.jsx)(p,{children:(0,s.jsx)("main",{className:"min-h-screen p-4 sm:p-6 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-4 sm:mb-6 md:mb-8 text-center",children:"PDF ↔ Image Converter"}),(0,s.jsx)("p",{className:"text-center mb-6 sm:mb-8 text-gray-600 text-sm sm:text-base",children:"Convert between PDF and image formats in your browser"}),(0,s.jsx)(d,{onFilesAdded:e=>{t(t=>[...t,...e])},currentFileCount:e.length}),e.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{files:e,onDelete:e=>{t(t=>t.filter(t=>t.id!==e))},onReorder:e=>{t(e)}}),(0,s.jsx)(u,{canConvertPdfToImages:h,canConvertImagesToPdf:x,onConvert:l,onDownload:()=>{if(r.downloadBlob&&r.downloadFileName){let e=URL.createObjectURL(r.downloadBlob),t=document.createElement("a");t.href=e,t.download=r.downloadFileName,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e),n({type:null,status:"idle",progress:{current:0,total:0,message:""},error:null,downloadBlob:void 0,downloadFileName:void 0})}},isProcessing:"processing"===r.status,hasDownloadReady:v}),(0,s.jsx)(g,{state:r})]})]})})})}}},function(e){e.O(0,[83,971,23,744],function(){return e(e.s=3365)}),_N_E=e.O()}]);